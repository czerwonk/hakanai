<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Hakanai API Documentation - Zero-knowledge secret sharing API reference"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; connect-src 'self'; font-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'none'; upgrade-insecure-requests"
    />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <title>Hakanai - API Documentation</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="/common-utils.js" type="module"></script>
  </head>
  <body class="expanded-view">
    <div class="container">
      <div class="header">
        <a href="/">
          <img src="/logo.svg" alt="Hakanai" />
        </a>
      </div>

      <h1>API Documentation</h1>

      <section>
        <h2>Authentication</h2>
        <p>
          If the server requires authentication, include your token in the
          Authorization header:
        </p>
        <div class="code-block">
          <code>Authorization: Bearer your-token-here</code>
        </div>
      </section>

      <section>
        <h2>API Endpoints</h2>

        <div class="endpoint">
          <h3>Create Secret</h3>
          <div class="method-url">
            <span class="method post">POST</span>
            <span class="url">/api/v1/secret</span>
          </div>

          <h4>Request Body</h4>
          <div class="code-block">
            <code
              >{ "data": "base64-encoded-secret-data", "expires_in": 3600
              }</code
            >
          </div>

          <h4>Response</h4>
          <div class="code-block">
            <code>{ "id": "550e8400-e29b-41d4-a716-446655440000" }</code>
          </div>

          <h4>Status Codes</h4>
          <ul>
            <li><strong>200 OK</strong> - Secret created successfully</li>
            <li><strong>400 Bad Request</strong> - Invalid request body</li>
            <li>
              <strong>401 Unauthorized</strong> - Missing or invalid token
            </li>
          </ul>
        </div>

        <div class="endpoint">
          <h3>Retrieve Secret</h3>
          <div class="method-url">
            <span class="method get">GET</span>
            <span class="url">/api/v1/secret/{id}</span>
          </div>

          <h4>Response</h4>
          <div class="code-block">
            <code>base64-encoded-secret-data</code>
          </div>

          <h4>Status Codes</h4>
          <ul>
            <li><strong>200 OK</strong> - Secret retrieved successfully</li>
            <li>
              <strong>404 Not Found</strong> - Secret not found or expired
            </li>
            <li><strong>410 Gone</strong> - Secret already accessed</li>
          </ul>
        </div>
      </section>

      <section>
        <h2>Example Usage</h2>

        <h4>Creating a Secret (curl)</h4>
        <div class="code-block">
          <code
            >curl -X POST https://hakanai.example.com/api/v1/secret \ -H
            "Content-Type: application/json" \ -H "Authorization: Bearer
            your-token" \ -d '{ "data": "bXkgc2VjcmV0IG1lc3NhZ2U=",
            "expires_in": 3600 }'</code
          >
        </div>

        <h4>Retrieving a Secret (curl)</h4>
        <div class="code-block">
          <code
            >curl
            https://hakanai.example.com/api/v1/secret/550e8400-e29b-41d4-a716-446655440000</code
          >
        </div>
      </section>

      <section>
        <h2>Important Notes</h2>
        <ul>
          <li>
            <strong>Zero-Knowledge:</strong> All encryption/decryption happens
            client-side
          </li>
          <li>
            <strong>One-Time Access:</strong> Secrets are deleted after first
            retrieval
          </li>
          <li>
            <strong>Self-Destructing:</strong> Secrets expire after configured
            TTL
          </li>
          <li>
            <strong>Base64 Encoding:</strong> All secret data must be base64
            encoded
          </li>
          <li>
            <strong>Maximum Size:</strong> Check server configuration for upload
            limits
          </li>
        </ul>
      </section>

      <div class="footer">
        <div class="footer-content">
          <div class="footer-line">
            <span class="project-name">Hakanai</span>
            <span class="version">v1.3.2</span>
          </div>
          <div class="footer-line">
            <a
              href="https://github.com/czerwonk/hakanai"
              target="_blank"
              rel="noopener"
              >Github</a
            >
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { initTheme } from "/common-utils.js";
      document.addEventListener("DOMContentLoaded", function () {
        initTheme();
      });
    </script>
  </body>
</html>

