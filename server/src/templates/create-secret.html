<!doctype html>
<html lang="en">
  <head>
    [[HEAD]]
    <meta
      name="description"
      content="Create and share one-time secrets securely with Hakanai - zero-knowledge secret sharing"
      data-i18n-content="meta.create"
    />
    <title data-i18n-title="page.create.title">Hakanai - Create Secret</title>
  </head>
  <body>
    [[LANGUAGE_SELECTOR]] [[THEME_SWITCHER]]
    <main class="container">
      [[HEADER]]
      <section aria-labelledby="main-heading">
        <h1 id="main-heading" data-i18n="header.create">
          Create One-Time Secret
        </h1>
        <form id="create-secret-form" novalidate>
          <div class="input-group">
            <fieldset>
              <legend data-i18n="label.secretType">Secret Type:</legend>
              <div class="radio-group">
                <label>
                  <input
                    type="radio"
                    name="secretType"
                    value="text"
                    id="textRadio"
                    checked
                  />
                  <span data-i18n="label.text">Text Message</span>
                </label>
                <label>
                  <input
                    type="radio"
                    name="secretType"
                    value="file"
                    id="fileRadio"
                  />
                  <span data-i18n="label.file">File</span>
                </label>
              </div>
            </fieldset>
          </div>
          <div class="input-group" id="textInputGroup">
            <label for="secretText" data-i18n="label.secret"
              >Enter your secret:</label
            >
            <textarea
              id="secretText"
              placeholder="Enter your secret message here..."
              data-i18n-placeholder="placeholder.secret"
              aria-describedby="secret-help"
              autocomplete="off"
              spellcheck="false"
              rows="4"
            ></textarea>
            <span data-i18n="helper.secret" class="input-helper"
              >Your message will be encrypted before leaving your browser</span
            >
            <span id="secret-help" class="sr-only" data-i18n="aria.secretInput"
              >Enter the secret message you want to share securely</span
            >
          </div>
          <div class="input-group hidden" id="fileInputGroup">
            <label for="secretFile" data-i18n="label.fileSelect"
              >Select file to share:</label
            >
            <div id="fileDropzone" class="file-dropzone">
              <div class="file-dropzone-content">
                <div class="icon">üìÅ</div>
                <div class="primary-text" data-i18n="dropzone.primary">
                  Drop files here or click to select
                </div>
                <div class="secondary-text" data-i18n="dropzone.secondary">
                  Supports all file types
                </div>
                <div class="helper-text" data-i18n="dropzone.helper">
                  File will be encrypted before upload.
                </div>
              </div>
              <input type="file" id="secretFile" aria-describedby="file-help" />
            </div>
            <!-- Fallback button for browsers without drag and drop support -->
            <button
              type="button"
              class="file-input-button hidden"
              id="fileInputButton"
              data-i18n="button.chooseFile"
            >
              Choose File
            </button>
            <span data-i18n="helper.fileSelect" class="input-helper"
              >File will be encrypted before upload.</span
            >
            <span id="file-help" class="sr-only" data-i18n="aria.fileInput"
              >Select a file to share securely. The file will be encrypted
              before being sent.</span
            >
            <div id="fileInfo" class="file-info hidden">
              <span id="fileName"></span>
              <span id="fileSize"></span>
            </div>
          </div>
          <div class="input-group">
            <label for="authToken" data-i18n="label.token"
              >Authentication Token:</label
            >
            <input
              id="authToken"
              type="password"
              placeholder="Enter authentication token (leave empty if none required)"
              data-i18n-placeholder="placeholder.token"
              aria-describedby="token-help"
              autocomplete="off"
            />
            <span data-i18n="helper.token" class="input-helper"
              >Leave empty if no authentication is required</span
            >
            <span id="token-help" class="sr-only" data-i18n="aria.tokenInput"
              >Enter the authentication token if required by the server</span
            >
            <label class="checkbox-label">
              <input type="checkbox" id="saveTokenCookie" />
              <span data-i18n="label.saveToken"
                >Remember authentication token (for current session only)</span
              >
            </label>
            <span data-i18n="helper.saveToken" class="input-helper">
              Token will be stored securely in your browser for the current
              session only. You will need to re-enter it when you start a new
              browser session.
            </span>
          </div>
          [[TTL_SELECTOR]]
          <div class="input-group">
            <label class="checkbox-label">
              <input type="checkbox" id="separateKey" />
              <span data-i18n="label.separateKey"
                >Show URL and key separately for enhanced security</span
              >
            </label>
            <span data-i18n="helper.separateKey" class="input-helper">
              When enabled, the URL and decryption key are displayed separately,
              allowing you to share them through different channels for enhanced
              security.
            </span>
          </div>
          <div class="input-group">
            <label class="checkbox-label">
              <input type="checkbox" id="generateQrCode" />
              <span data-i18n="label.generateQrCode"
                >Generate QR code for easy sharing</span
              >
            </label>
            <span data-i18n="helper.generateQrCode" class="input-helper">
              When enabled, a QR code will be generated for the secret URL.
              Disable this if you're concerned about shoulder surfing or visual
              exposure.
            </span>
          </div>
          <div class="input-group hidden" id="restrictionsInputGroup">
            <label for="allowedIPs" data-i18n="label.allowedIPs">
              IP Address Restrictions (Optional):
            </label>
            <textarea
              id="allowedIPs"
              placeholder="192.168.1.1&#10;10.0.0.0/8&#10;2001:db8::/32"
              data-i18n-placeholder="placeholder.allowedIPs"
              aria-describedby="ips-help"
              autocomplete="off"
              spellcheck="false"
              rows="3"
            ></textarea>
            <span data-i18n="helper.allowedIPs" class="input-helper">
              Enter IP addresses or CIDR ranges (one per line) that can access
              this secret. Leave empty to allow access from any IP address.
            </span>
            <span id="ips-help" class="sr-only" data-i18n="aria.allowedIPs">
              Enter IP addresses or CIDR ranges, one per line, to restrict
              access to this secret
            </span>
          </div>
          <button type="submit" id="createBtn" data-i18n="button.create">
            Create Secret
          </button>
        </form>
        <div
          id="result"
          role="region"
          aria-live="polite"
          aria-atomic="true"
        ></div>
      </section>
      [[FOOTER]]
    </main>
    <noscript>
      <div class="container">
        <div class="result error">
          <h3 data-i18n="msg.jsRequired">JavaScript Required</h3>
          <p data-i18n="msg.jsRequiredDetail">
            This application requires JavaScript to encrypt secrets securely in
            your browser.
          </p>
        </div>
      </div>
    </noscript>

    <script type="module" src="/create-secret.js?v={cache_buster}"></script>
  </body>
</html>
