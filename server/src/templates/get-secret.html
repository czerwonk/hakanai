<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Retrieve your one-time secret securely with Hakanai - zero-knowledge secret sharing"
      data-i18n-content="meta.get"
    />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <title data-i18n-title="page.get.title">Hakanai - Retrieve Secret</title>
    <link rel="stylesheet" href="/style.css?v={cache_buster}" />
    <script type="module" src="/i18n.js?v={cache_buster}"></script>
  </head>
  <body>
    <button id="theme-toggle" aria-label="Toggle theme">ðŸŒ™</button>
    <select id="language-switcher" aria-label="Language"></select>
    <main class="container">
      <header class="header">
        <a href="/" data-i18n-aria="aria.logoHome">
          <img src="/logo.svg" alt="Logo" width="140" height="110" />
        </a>
      </header>
      <section aria-labelledby="main-heading">
        <h1 id="main-heading" data-i18n="header.get">One-Time Secret</h1>
        <form id="secretForm" novalidate>
          <div class="input-group">
            <label for="secretUrl" data-i18n="label.url">Enter URL:</label>
            <input
              type="text"
              id="secretUrl"
              placeholder=""
              aria-describedby="url-help"
              required
              autocomplete="off"
              spellcheck="false"
            />
            <span data-i18n="helper.url" class="input-helper"
              >The decryption key after # is never sent to the server</span
            >
            <span id="url-help" class="sr-only" data-i18n="aria.urlInput"
              >Enter the full URL including the secret key after the hash</span
            >
          </div>
          <div class="input-group hidden" id="keyInputGroup">
            <label for="secretKey" data-i18n="label.key">Decryption Key:</label>
            <input
              type="password"
              id="secretKey"
              placeholder=""
              aria-describedby="key-help"
              autocomplete="off"
              spellcheck="false"
            />
            <span data-i18n="helper.key" class="input-helper"
              >Base64-encoded decryption key (shared separately)</span
            >
            <span id="key-help" class="sr-only" data-i18n="aria.keyInput"
              >Enter the base64-encoded decryption key</span
            >
          </div>
          <button type="submit" id="retrieveBtn" data-i18n="button.retrieve">
            Retrieve Secret
          </button>
        </form>
        <div class="loading" id="loading" role="status" aria-live="polite">
          <div class="spinner" aria-hidden="true"></div>
          <span data-i18n="msg.retrieving">Retrieving secret...</span>
        </div>
        <div
          id="result"
          role="region"
          aria-live="polite"
          aria-atomic="true"
        ></div>
      </section>
      <footer class="footer">
        <div class="footer-content">
          <div class="footer-line">
            <span class="project-name">Hakanai</span>
            <span class="version">v{version}</span>
          </div>
          <div class="footer-line">
            <a href="https://github.com/czerwonk/hakanai" class="github-link"
              >Github</a
            >
          </div>
        </div>
      </footer>
    </main>
    <noscript>
      <div class="container">
        <div class="result error">
          <h3 data-i18n="msg.jsRequired">JavaScript Required</h3>
          <p data-i18n="msg.jsRequiredDetail">
            This application requires JavaScript to decrypt secrets securely in
            your browser.
          </p>
        </div>
      </div>
    </noscript>

    <script type="module" src="/get-secret.js?v={cache_buster}"></script>
  </body>
</html>
